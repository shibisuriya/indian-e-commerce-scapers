import requests
from keys import key

cookies = {
    'T': 'TI167345962907300058582508027895053998207175027503554726499854125045',
    'K-ACTION': 'null',
    '_pxhd': 'cb9tZoG1LndNjWqQsmcBRvCIKphLXuCXx-JCtFbUfx2kZXLFWHJY1Hx5lDTU3yCuswbO6LdoZPVnDR8gayqXuQ%3D%3D%3A0FzDjO1hDV6buK-OAa2i18Q4l9%2Fj9aW33uo4FPP9xPrFb%2FS8PiU2QVpfDURoGlITbF-BHq6PV%2F3ClH3AGIdm5cAwurAorqwSVxYYP6-5ReI%3D',
    'at': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IjNhNzdlZTgxLTRjNWYtNGU5Ni04ZmRlLWM3YWMyYjVlOTA1NSJ9.eyJleHAiOjE2ODQ5NDMxNzQsImlhdCI6MTY4NDk0MTM3NCwiaXNzIjoia2V2bGFyIiwianRpIjoiN2E2NDdiOWUtZGE0MS00NjllLWEzNmMtMTEyZjE5NDU0YTc3IiwidHlwZSI6IkFUIiwiZElkIjoiVEkxNjczNDU5NjI5MDczMDAwNTg1ODI1MDgwMjc4OTUwNTM5OTgyMDcxNzUwMjc1MDM1NTQ3MjY0OTk4NTQxMjUwNDUiLCJiSWQiOiJXRURFSFIiLCJrZXZJZCI6IlZJQkFFMEE3QkQ3QTQ0NERCREI4MzYwQUM2MDcxOTU2OUMiLCJ0SWQiOiJtYXBpIiwiZWFJZCI6IkQ4MFNBSFZKYzdNZlU5YjZ6VUZEbzVZLVpYNGs0eWl5IiwidnMiOiJMSSIsInoiOiJIWUQiLCJtIjp0cnVlLCJnZW4iOjR9.wnn677qwDFOW2uxue5KMmWir72hDYutYo96BzxdO88o',
    'rt': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IjhlM2ZhMGE3LTJmZDMtNGNiMi05MWRjLTZlNTMxOGU1YTkxZiJ9.eyJleHAiOjE3MDA4Mzg5NzQsImlhdCI6MTY4NDk0MTM3NCwiaXNzIjoia2V2bGFyIiwianRpIjoiM2RkOGMwZWEtODk3YS00MDU2LTk2NmYtMjlkNGZhMDE4NGI2IiwidHlwZSI6IlJUIiwiZElkIjoiVEkxNjczNDU5NjI5MDczMDAwNTg1ODI1MDgwMjc4OTUwNTM5OTgyMDcxNzUwMjc1MDM1NTQ3MjY0OTk4NTQxMjUwNDUiLCJiSWQiOiJXRURFSFIiLCJrZXZJZCI6IlZJQkFFMEE3QkQ3QTQ0NERCREI4MzYwQUM2MDcxOTU2OUMiLCJ0SWQiOiJtYXBpIiwibSI6eyJ0eXBlIjoibiJ9LCJ2IjoiWUxFQTlXIn0.adSYcZW1oYhBGz5Y9187v9MPr0WrOamVl6ncL1ngkxg',
    'Network-Type': '4g',
    'AMCVS_17EB401053DAF4840A490D4C%40AdobeOrg': '1',
    'gpv_pn': 'HomePage',
    'gpv_pn_t': 'FLIPKART%3AHomePage',
    's_cc': 'true',
    'AMCV_17EB401053DAF4840A490D4C%40AdobeOrg': '-227196251%7CMCIDTS%7C19502%7CMCMID%7C68843206659309700412961927781709425780%7CMCAID%7CNONE%7CMCOPTOUT-1684948585s%7CNONE%7CMCAAMLH-1685546185%7C12%7CMCAAMB-1685546185%7Cj8Odv6LonN4r3an7LhD3WZrU1bUpAkFkkiY1ncBR96t2PTI',
    '_pxvid': 'f2d560d7-fa45-11ed-b196-51f0238dba7e',
    'pxcts': 'f2d574df-fa45-11ed-b196-7455457a6e41',
    '__pxvid': 'f3193b3e-fa45-11ed-9141-0242ac120002',
    '_px3': '3d715988ec998b115b48dd3bf2c5bf45fa4bd370f77fb2e7d396d3b72d14618f:MnWcNAaGhLQm2kgXWQ9hEJq2sLtjJHXMAYh2XJpW3XxNZn60SdBbnRokPMUWFnR1nYKD617mgn4f5/WnsPQqUg==:1000:zTmJqOZU8Inv2wd7Q707zyCNm4aKJX+8OV1P5cg2pDD/X01o4n0d4zDSC0iAj1cCXv5LO0ICN4UaaJg2RjQx6yhrj6E5pysUFz5Hq40PSwr9X4L51NMUUJK+NCZeQgAs87wuObwc+ITRxF9sWKHoa2Fw8nB1r8aVuch33qgXj+5cOkaiiYDTHXPJfSFYZhEhQQVK4WdU9WkMeBh/jMR8mw==',
    'SN': 'VIBAE0A7BD7A444DBDB8360AC60719569C.TOKA4183A4028894FC1A32A9D55316ACC51.1684941383.LI',
    'S': 'd1t14Pxo/aD8KP0k/Pz8RSUY/PwAwTku7TcGYPwIUpSyZBByIr5z6RQT+UQz13QINDfCDzT5QCMlGGHno3gMFLS02DA==',
}

headers = {
    'Accept': '*/*',
    'Accept-Language': 'en-GB,en-US;q=0.9,en;q=0.8',
    'Connection': 'keep-alive',
    'Content-Type': 'application/json',
    # 'Cookie': 'T=TI167345962907300058582508027895053998207175027503554726499854125045; K-ACTION=null; _pxhd=cb9tZoG1LndNjWqQsmcBRvCIKphLXuCXx-JCtFbUfx2kZXLFWHJY1Hx5lDTU3yCuswbO6LdoZPVnDR8gayqXuQ%3D%3D%3A0FzDjO1hDV6buK-OAa2i18Q4l9%2Fj9aW33uo4FPP9xPrFb%2FS8PiU2QVpfDURoGlITbF-BHq6PV%2F3ClH3AGIdm5cAwurAorqwSVxYYP6-5ReI%3D; at=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IjNhNzdlZTgxLTRjNWYtNGU5Ni04ZmRlLWM3YWMyYjVlOTA1NSJ9.eyJleHAiOjE2ODQ5NDMxNzQsImlhdCI6MTY4NDk0MTM3NCwiaXNzIjoia2V2bGFyIiwianRpIjoiN2E2NDdiOWUtZGE0MS00NjllLWEzNmMtMTEyZjE5NDU0YTc3IiwidHlwZSI6IkFUIiwiZElkIjoiVEkxNjczNDU5NjI5MDczMDAwNTg1ODI1MDgwMjc4OTUwNTM5OTgyMDcxNzUwMjc1MDM1NTQ3MjY0OTk4NTQxMjUwNDUiLCJiSWQiOiJXRURFSFIiLCJrZXZJZCI6IlZJQkFFMEE3QkQ3QTQ0NERCREI4MzYwQUM2MDcxOTU2OUMiLCJ0SWQiOiJtYXBpIiwiZWFJZCI6IkQ4MFNBSFZKYzdNZlU5YjZ6VUZEbzVZLVpYNGs0eWl5IiwidnMiOiJMSSIsInoiOiJIWUQiLCJtIjp0cnVlLCJnZW4iOjR9.wnn677qwDFOW2uxue5KMmWir72hDYutYo96BzxdO88o; rt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IjhlM2ZhMGE3LTJmZDMtNGNiMi05MWRjLTZlNTMxOGU1YTkxZiJ9.eyJleHAiOjE3MDA4Mzg5NzQsImlhdCI6MTY4NDk0MTM3NCwiaXNzIjoia2V2bGFyIiwianRpIjoiM2RkOGMwZWEtODk3YS00MDU2LTk2NmYtMjlkNGZhMDE4NGI2IiwidHlwZSI6IlJUIiwiZElkIjoiVEkxNjczNDU5NjI5MDczMDAwNTg1ODI1MDgwMjc4OTUwNTM5OTgyMDcxNzUwMjc1MDM1NTQ3MjY0OTk4NTQxMjUwNDUiLCJiSWQiOiJXRURFSFIiLCJrZXZJZCI6IlZJQkFFMEE3QkQ3QTQ0NERCREI4MzYwQUM2MDcxOTU2OUMiLCJ0SWQiOiJtYXBpIiwibSI6eyJ0eXBlIjoibiJ9LCJ2IjoiWUxFQTlXIn0.adSYcZW1oYhBGz5Y9187v9MPr0WrOamVl6ncL1ngkxg; Network-Type=4g; AMCVS_17EB401053DAF4840A490D4C%40AdobeOrg=1; gpv_pn=HomePage; gpv_pn_t=FLIPKART%3AHomePage; s_cc=true; AMCV_17EB401053DAF4840A490D4C%40AdobeOrg=-227196251%7CMCIDTS%7C19502%7CMCMID%7C68843206659309700412961927781709425780%7CMCAID%7CNONE%7CMCOPTOUT-1684948585s%7CNONE%7CMCAAMLH-1685546185%7C12%7CMCAAMB-1685546185%7Cj8Odv6LonN4r3an7LhD3WZrU1bUpAkFkkiY1ncBR96t2PTI; _pxvid=f2d560d7-fa45-11ed-b196-51f0238dba7e; pxcts=f2d574df-fa45-11ed-b196-7455457a6e41; __pxvid=f3193b3e-fa45-11ed-9141-0242ac120002; _px3=3d715988ec998b115b48dd3bf2c5bf45fa4bd370f77fb2e7d396d3b72d14618f:MnWcNAaGhLQm2kgXWQ9hEJq2sLtjJHXMAYh2XJpW3XxNZn60SdBbnRokPMUWFnR1nYKD617mgn4f5/WnsPQqUg==:1000:zTmJqOZU8Inv2wd7Q707zyCNm4aKJX+8OV1P5cg2pDD/X01o4n0d4zDSC0iAj1cCXv5LO0ICN4UaaJg2RjQx6yhrj6E5pysUFz5Hq40PSwr9X4L51NMUUJK+NCZeQgAs87wuObwc+ITRxF9sWKHoa2Fw8nB1r8aVuch33qgXj+5cOkaiiYDTHXPJfSFYZhEhQQVK4WdU9WkMeBh/jMR8mw==; SN=VIBAE0A7BD7A444DBDB8360AC60719569C.TOKA4183A4028894FC1A32A9D55316ACC51.1684941383.LI; S=d1t14Pxo/aD8KP0k/Pz8RSUY/PwAwTku7TcGYPwIUpSyZBByIr5z6RQT+UQz13QINDfCDzT5QCMlGGHno3gMFLS02DA==',
    'Origin': 'https://www.flipkart.com',
    'Referer': 'https://www.flipkart.com/',
    'Sec-Fetch-Dest': 'empty',
    'Sec-Fetch-Mode': 'cors',
    'Sec-Fetch-Site': 'same-site',
    'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/113.0.0.0 Safari/537.36',
    'X-User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/113.0.0.0 Safari/537.36 FKUA/website/42/website/Desktop',
    'sec-ch-ua': '"Google Chrome";v="113", "Chromium";v="113", "Not-A.Brand";v="24"',
    'sec-ch-ua-mobile': '?0',
    'sec-ch-ua-platform': '"macOS"',
}

json_data = {
    'pageUri': f'/search?q={key}&otracker=search&otracker1=search&marketplace=FLIPKART&as-show=on&as=off',
    'pageContext': {
        'fetchSeoData': True,
        'paginatedFetch': False,
        'pageNumber': 1,
    },
    'requestContext': {
        'type': 'BROWSE_PAGE',
        'ssid': 'da2zwy4re80000001684941395669',
        'sqid': '0dy6kp0w7k0000001684941395669',
    },
}

response = requests.post(
    'https://2.rome.api.flipkart.com/api/4/page/fetch',
    cookies=cookies,
    headers=headers,
    json=json_data,
)
